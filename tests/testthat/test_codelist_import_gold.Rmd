
```{r}
## Example construction of a clinical code list
def <- MedicalDefinition(
    terms = list(
        "peripheral vascular disease", "peripheral gangrene", "-wrong answer",
        "intermittent claudication", "thromboangiitis obliterans",
        "thromboangiitis obliterans", "diabetic peripheral angiopathy",
        c("diabetes", "peripheral angiopathy"),  # single AND expression
        c("buerger",  "disease presenile_gangrene"),
            "-excepted", # exclusion
    codes = list("G73"),
    tests = NULL,
    drugs = list("insulin", "diabet", "aspirin")))
```


```{r}
context("Importing data from csv")
input_file <- system.file("extdata", "example_search.csv", package = "rEHR")
def <- import_definitions(input_file)
```

```{r}
test_that("import is sane", {
    expect_true(length(input_file) > 0)
    expect_is(def, "MedicalDefinition")
    expect_named(def, c("terms", "codes", "tests", "drugs", "drugcodes"))
})
```

